!function(Y,x){"use strict";var G="ht",L=Y[G],s="position",C="absolute",g="px",h="left",D="top",M="innerHTML",P="className",w="width",F="height",q="0",W="▶",j="display",Z="none",l="visibility",N="user-select",S="margin",y="padding",e=null,p=L.Color,t=L.Default,c=t.getInternal(),O=Y.setTimeout,Q=Y.setInterval,B=Y.clearTimeout,f=Y.clearInterval,T=Y.parseInt,r=t.isLeftButton,z=t.isDragging,n=t.startDragging,$=t.getDistance,J=t.isTouchable,v=p.widgetIconHighlight,d=p.widgetIconBorder,i=p.widgetIconGradient,u=function(){return document},H=function(f,k){return f.querySelectorAll(k)},K=function(b,d){var A=u().createElement(b);return"ul"===b&&(o(A,s,"relative"),o(A,S,q),o(A,y,q),o(A,"list-style",Z),o(A,"box-sizing","border-box"),o(A,"-moz-box-sizing","border-box"),o(A,j,"inline-block"),o(A,"vertical-align","text-bottom"),o(A,"border","1px solid "+t.contextMenuBorderColor),o(A,"box-shadow","0 0 16px 1px "+t.contextMenuShadowColor),o(A,"overflow","hidden"),d||o(A,"border-radius",5+g)),A},I=function(R){var s=R.touches[0];return s?s:R.changedTouches[0]},k=function(){return K("div")},E=function(){return K("canvas")},o=function(f,g,B){f.style.setProperty(g,B,e)},b=function(N,q,v){t.def(L.widget[N],q,v)},R=function(X,f){X.appendChild(f)},a=function(O,m){O.removeChild(m)},V=function(){return u().body},m=function(C,$,Y,t){C.addEventListener($,Y,!!t)},_=function(Y,G,F,x){Y.removeEventListener(G,F,!!x)};c.addMethod(t,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:d},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:v}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:d},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:v,gradient:t.imageGradient,gradientColor:i,background:v}]},contextMenuLabelFont:(J?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)"},!0);var U=function(C){var x=this,y=C._view;if(x.$11b=C,x.addListeners(),m(y,"contextmenu",function(D){D.preventDefault()}),!J){var e=x.$37b=x.$36b.bind(x);m(y,"mouseover",e),m(y,"mouseout",e)}};t.def(U,x,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(X){if(t.preventDefault(X),r(X)){for(var Z=this,k=Z.$11b,p=Z.getView(),m=p.children,$=0;$<m.length;$++){var E=m[$],e=E.$24b,A=E.$25b;if(e&&e.contains(X.target))return k.scrollUp(E),Z.$28b=O(function(){Z.$29b=Q(function(){k.scrollUp(E)},100)},500),n(Z,X),void 0;if(A&&A.contains(X.target))return k.scrollDown(E),Z.$28b=O(function(){Z.$29b=Q(function(){k.scrollDown(E)},100)},500),n(Z,X),void 0}J&&(X=I(X)),Z.$30b={x:X.pageX,y:X.pageY}}},handle_mousedown:function(L){this.handle_touchstart(L)},handle_touchend:function(C){if(r(C)){var b=this,n=b.$30b,B=J?{x:I(C).pageX,y:I(C).pageY}:{x:C.pageX,y:C.pageY};if(!n||$(n,B)>1)return delete b.$30b,void 0;for(var H=b.getView(),q=b.$11b,F=C.target,A=e,m=e,S=q._items,M=H.$26b,N=0;N<M.length;N++)if(m=M[N],m.contains(F)){A=m.getAttribute("data-id");break}if(A&&S){var L=q.$17b(S,function(O){return O._id===A});if(L){var u=!1;L.disabled instanceof Function?u=L.disabled.call(q,L):L.disabled===!0&&(u=!0),u||(L.items?J&&b.$36b(m,!0):q.$1b(L,C))}}delete b.$30b}},$36b:function(r,O){if(!z()){var V,u=this,W=u.$11b,f=u.getView(),K=W.$20b||f.children[0],C=W.$19b,p=f.$26b,n=f.children,Y=r.target,b=f.getBoundingClientRect(),e=t.getWindowInfo(),y=e.width,J=e.height,A=function(i){for(var k=0;k<n.length;k++){var Z=n[k],r=new RegExp(i+"$"),T=Z[P];if(T&&(r.test(T)||T.indexOf(i+" ")>=0))return Z}},c=function(K){for(var Y=0;Y<p.length;Y++){var U=p[Y],Q=new RegExp(K+"$"),g=U[P];if(g&&(Q.test(g)||g.indexOf(K+" ")>=0))return U}},s=function($){var N=c("menu-item"+$.$45b),L=N.getBoundingClientRect(),U=L.top-b.top,F=L.left-b.left;o($,D,U+g),o($,h,F+L.width+g);var A=$.getBoundingClientRect(),z=A.top,n=A.left,E=A.height,v=A.width,H=z+E+2,R=n+v+2;H>J&&o($,D,U+J-H+g),R>y&&o($,h,F-v+g)};if(O)V=r;else{if("mouseover"===r.type){for(var M=0;M<p.length;M++){var k=p[M];if(k.contains(Y)){V=k;break}}if(!V&&C){var U=C.parentNode,j=A("submenu"+C.getAttribute("data-id"));(j&&j.contains(Y)||U&&U.contains(Y))&&(V=C)}}else if("mouseout"===r.type){for(var I=!1,Z=r.relatedTarget,M=0;M<n.length;M++){var L=n[M];if("hidden"!==L.style.visibility&&L.contains(Z)){I=!0;break}}if(I)return}!V&&K&&(V=c("menu-item"+(K.$45b||"NaN")))}if(V!=C){if(C)for(var R=C;R;){R[P]=R[P].replace(" menu-item-hover",""),R[P].indexOf("disabled")<0&&(o(R,"background-color",t.contextMenuBackground),o(R,"color",t.contextMenuLabelColor));var B=A("submenu"+R.getAttribute("data-id"));B&&o(B,l,"hidden");var E=R.parentNode;R=c("menu-item"+(E.$45b||"NaN"))}if(V){for(var Q=V,T=[];Q;){Q[P]+=" menu-item-hover",Q[P].indexOf("disabled")<0&&(o(Q,"background-color",t.contextMenuHoverBackground),o(Q,"color",t.contextMenuHoverLabelColor));var _=A("submenu"+Q.getAttribute("data-id"));_&&(o(_,l,"visible"),T.push(_));var E=Q.parentNode;Q=c("menu-item"+(E.$45b||"NaN"))}T.reverse(),T.forEach(function(R){s(R)})}}W.$19b=V,W.$20b=V?V.parentNode:f.children[0]}},handle_mouseup:function(E){this.handle_touchend(E)},handleWindowTouchEnd:function(){var n=this;n.$28b!=e&&(B(n.$28b),delete n.$28b),n.$29b!=e&&(f(n.$29b),delete n.$29b),delete n.$34b,delete n.$30b,delete n.$35b},handleWindowMouseUp:function(j){this.handleWindowTouchEnd(j)},handle_mousemove:function(y){this.handle_touchmove(y)},handle_touchmove:function(P){if(!z()&&r(P)){for(var x=this,u=x.getView().children,V=e,t=0;t<u.length;t++){var S=u[t];if(S.contains(P.target)){V=S;break}}var g=x.$30b,v=J?{x:I(P).pageX,y:I(P).pageY}:{x:P.pageX,y:P.pageY};V&&g&&$(g,v)>2&&(n(x,P),x.$34b=V,x.$35b=V.$18b)}},handleWindowTouchMove:function(m){var P=this,w=P.$11b,H=P.$34b,T=P.$35b,Q=P.$30b;if(Q&&H){var s=J?{x:I(m).pageX,y:I(m).pageY}:{x:m.pageX,y:m.pageY},x=s.y-Q.y;x>0?w.scrollUp(H,H.$18b-(T-x)):w.scrollDown(H,T-x-H.$18b)}},handleWindowMouseMove:function(H){this.handleWindowTouchMove(H)},$10b:function(w,f){w.preventDefault();for(var O=this,M=O.getView().children,F=e,y=0;y<M.length;y++){var U=M[y];if(U.contains(w.target)){F=U;break}}if(F){var l=this.$11b,H=l.getRowHeight();Math.abs(f)>.05&&(f>0?l.scrollUp(F,f*H):0>f&&l.scrollDown(F,-f*H))}},handle_mousewheel:function(m){this.$10b(m,m.wheelDelta/40)},handle_DOMMouseScroll:function(I){this.$10b(I,-I.detail)},$44b:function(W){this.getView().contains(W.target)||this.$11b.hide()},$41b:function(m){this.$11b.show(m)},$4b:function(E,o){var n=this.$11b;if(o=o||n._items,o&&o.length&&E.keyCode){var $=[E.keyCode];E.shiftKey&&$.push(16),E.ctrlKey&&$.push(17),E.altKey&&$.push(18),/mac/.test(Y.navigator?Y.navigator.userAgent.toLowerCase():"")?E.metaKey&&$.push(17):E.metaKey&&$.push(91),$.sort();var A=$.join(),q=n.$17b(o,function(f){if(f.key){var o=f.key.slice(0);return o.sort(),A===o.join()}});if(q){q.preventDefault!==!1&&E.preventDefault();var t=!1;q.disabled instanceof Function?t=q.disabled.call(n,q):q.disabled===!0&&(t=!0),t||n.$1b(q,E)}}},$39b:function(x){var N=this,A=I(x);N.$32b={x:A.pageX,y:A.pageY}},$38b:function(R){var C=this,x=I(R);C.$31b={x:x.pageX,y:x.pageY},C.$33b=O(function(){C.$31b&&(C.$32b?$(C.$31b,C.$32b)<10&&C.$11b.show(R):C.$11b.show(R)),delete C.$33b,delete C.$31b,delete C.$32b},600)},$40b:function(){var c=this;c.$33b!=e&&(B(c.$33b),delete c.$33b,delete c.$31b,delete c.$32b)}}),L.widget.ContextMenu=function(R){var x=this,J=x._view=k();J[P]="ht-widget-contextmenu",x.setItems(R),x.$13b=new U(x),o(J,"font",t.contextMenuLabelFont),o(J,s,C),o(J,"cursor","default"),o(J,"-webkit-"+N,Z),o(J,"-moz-"+N,Z),o(J,"-ms-"+N,Z),o(J,N,Z),o(J,"box-sizing","border-box"),o(J,"-moz-box-sizing","border-box"),t.baseZIndex!=e&&o(J,"z-index",T(t.baseZIndex)+2+""),x.$3b=function(H){x.$13b.$4b(H)}},b("ContextMenu",x,{$5b:0,_items:e,$21b:e,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var S=this,o=S._enableGlobalKey;o===!1&&(m(u(),"keydown",S.$3b),S._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,_(u(),"keydown",this.$3b)},setItems:function(R){this._items=R},setVisibleFunc:function(_){this.$16b=_},setLabelMaxWidth:function(W){this.$43b=W},$1b:function(O,t){var I=this;if("check"===O.type)O.selected=!O.selected;else if("radio"===O.type){var x=O.groupId;I.$17b(I._items,function(c){c.groupId===x&&(c.selected=!1)}),O.selected=!0}if(I.hide(),O.action)O.action.apply(O.scope||I,[O,t]);else if(O.href){var A=O.linkTarget||"_self";Y.open(O.href,A)}},getItemByProperty:function(K,S,i){var l=this;if(i=i||l._items,!i||0===i.length)return e;var L=l.$17b(i,function(y){return y[K]===S});return L||e},scrollUp:function(I,b){var t=this;if(b=b==e?20:b,b=T(b),0!==b){var Q=0;I.$18b>b&&(Q=I.$18b-b),t.$42b(I,Q),I.scrollTop=Q,I.$18b=Q}},scrollDown:function(W,Z){var B=this;if(Z=Z==e?20:Z,Z=T(Z),0!==Z){var j=W.$22b,V=W.$23b,R=j-V;V+W.$18b+Z<j&&(R=W.$18b+Z),B.$42b(W,R),W.scrollTop=R,W.$18b=R}},$42b:function(V,p){p=p==e?V.$18b:p;var $=V.$24b,d=V.$25b;$&&(o($,"top",p+g),0==p?o($,j,Z):o($,j,"block")),d&&(o(d,"bottom",-p+g),p==V.$22b-V.$23b?o(d,j,Z):o(d,j,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(z,c){for(var s=0;s<z.length;s++){var B=z[s];if(c(B))return B;if(B.items){var Z=this.$17b(B.items,c);if(Z)return Z}}},$2b:function(U,p){for(var I=this,Y=0;Y<U.length;Y++){I.$5b++;var h=U[Y];if(!I.$16b||I.$16b.call(I,h)){var Q=K("li"),D=I.$5b+"";if(o(Q,"white-space","nowrap"),o(Q,j,"block"),"separator"===h){var G=k();G[P]="separator",o(G,F,t.contextMenuSeparatorWidth+g),o(G,"background",t.contextMenuSeparatorColor),R(Q,G)}else{h._id=D,Q.setAttribute("data-id",D);var e=K("span"),B=K("span"),$=E(),V=k();if(o(e,j,"inline-block"),o(B,j,"inline-block"),$[P]="prefix",o($,j,"inline-block"),o($,w,"1em"),o($,F,"1em"),o($,"vertical-align","middle"),o($,S,"0 0.2em"),"check"===h.type&&h.selected?$[P]+=" check-prefix":"radio"===h.type&&h.selected&&($[P]+=" radio-prefix"),R(Q,$),h.icon){var J=E();J[P]="contextmenu-item-icon",o(J,j,"inline-block"),o(J,"vertical-align","middle"),o(J,F,"1.2em"),o(J,w,"1.2em"),o(J,"margin-right","0.2em"),J.$50b=h.icon,R(e,J)}if(B[M]=h.label,R(e,B),R(Q,e),V[P]="suffix",o(V,j,"inline-block"),o(V,"margin-left","1em"),o(V,"margin-right","0.4em"),o(V,"text-align","right"),o(V,"font-size","75%"),h.items&&(V[M]=W),h.suffix&&(V[M]=h.suffix),R(Q,V),Q[P]="menu-item menu-item"+D,o(Q,"background-color",t.contextMenuBackground),o(Q,"color",t.contextMenuLabelColor),o(Q,y,"3px 0"),h.disabled instanceof Function){var q=h.disabled.call(I,h);q&&(Q[P]+=" disabled",o(Q,"color",t.contextMenuDisabledLabelColor))}else h.disabled&&(Q[P]+=" disabled",o(Q,"color",t.contextMenuDisabledLabelColor));if(h.items){I.$21b||(I.$21b=new L.List);var H=K("ul",I._r);H[P]="submenu"+D,H.$45b=D,o(H,l,"hidden"),o(H,s,C),R(I._view,H),I.$21b.add(H),I.$2b(h.items,H)}}R(p,Q)}}},rebuild:function(){var X=this,Q=X._items,q=X._view;if(q&&(q[M]="",X.$21b=e,X.$5b=0,X.$19b=e,X.$20b=e,q.$26b=e,Q&&0!==Q.length)){var F=K("ul",X._r);R(q,F),X.$2b(Q,F)}},addTo:function(T){if(T){var F=this,p=F.$13b;if(F.$12b=T,F.$9b=function(a){p.$44b(a)},F.$27b=function(r){p.$41b(r)},J){var n=F.$6b=function(O){p.$38b(O)},X=F.$7b=function(b){p.$39b(b)},r=F.$8b=function(X){p.$40b(X)};m(T,"touchstart",n,!0),m(T,"touchmove",X),m(T,"touchend",r)}else m(T,"contextmenu",F.$27b)}},show:function(y,f,v){var S=this,v=v==e?!0:!1,N=S._view;if(N){if(S.invalidate(),1===arguments.length){var x=y;if(J){var T=I(x);y=T.pageX,f=T.pageY}else y=x.pageX,f=x.pageY}var Q=t.getWindowInfo(),z=Q.width,L=Q.height,n=Q.left,A=Q.top,$={pageX:y,pageY:f,clientX:y-n,clientY:f-A,target:1,originEvent:x},l=$.clientX,E=$.clientY,p=function(Q){Q.style.height=L-6+g;var K=k(),b=k(),$=function(B){o(B,s,C),o(B,"text-align","center"),o(B,w,"100%"),o(B,"font-size",10+g),o(B,"padding","2px 0"),o(B,"border","0px solid "+t.contextMenuScrollerBorderColor),o(B,"background-color",t.contextMenuScrollerColor1),B.style.backgroundImage="-webkit-linear-gradient(top, "+t.contextMenuScrollerColor1+", "+t.contextMenuScrollerColor2+")",B.style.backgroundImage="linear-gradient(to bottom, "+t.contextMenuScrollerColor1+", "+t.contextMenuScrollerColor2+")"};K[P]="menu-arrow-item menu-arrow-item-top",b[P]="menu-arrow-item menu-arrow-item-bottom",$(K),o(K,"top",q),o(K,"left",q),o(K,"border-bottom-width",1+g),K[M]="▲",$(b),o(b,"bottom",q),o(b,"left",q),o(b,"border-top-width",1+g),b[M]="▼",Q.$24b=K,Q.$25b=b,Q.$18b=Q.scrollTop,Q.$22b=Q.scrollHeight,Q.$23b=Q.clientHeight,R(Q,K),R(Q,b),S.$42b(Q)};S.beforeShow&&S.beforeShow($);var r=S._items;if(r&&(x&&x.preventDefault(),r.length)){S.rebuild(),R(V(),N),N.$26b=H(N,".menu-item");var X=N.children[0];X.offsetHeight>L&&p(X);var U=E+(v?1:0),O=l+(v?1:0),Y=function(P){for(var d=0,_=0,y=0,A=S.$43b;y<P.children.length;y++){var z=P.children[y];if(z.getAttribute("data-id")){var F=z.children[1],t=z.children[2],L=F.children;if(A){var m=L[0];L.length>1&&(m=L[1]),m.offsetWidth>A&&(m[M]="<marquee scrollamount='3'>"+m[M]+"</marquee>",m.children[0].style.verticalAlign="text-bottom",o(m,w,A+g),o(m,j,"inline-block"))}var q=F.offsetWidth,s=t.offsetWidth;q>d&&(d=q),s>_&&(_=s)}}for(y=0;y<P.children.length;y++){var z=P.children[y];if(z.getAttribute("data-id")){var F=z.children[1],t=z.children[2],C=F.children[0],D=F.children[1];!D&&C.style.width&&o(C,w,d+g),o(F,w,d+g),o(t,w,_+g)}}};Y(X);var c=E+3+N.offsetHeight,G=l+3+N.offsetWidth;c>L?o(N,D,U-(c-L)+A+g):o(N,D,U+A+g),G>z?o(N,h,O-(G-z)+n+g):o(N,h,O+n+g);var i=S.$21b;i&&i.each(function(t){Y(t),t.offsetHeight>L&&p(t)}),S.$9b&&m(u(),J?"touchstart":"mousedown",S.$9b,!0),S.afterShow&&S.afterShow($),S.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=e:!1},getRelatedView:function(){return this.$12b},hide:function(){var s=this,D=s._view;D&&D.parentNode&&(a(D.parentNode,D),_(u(),J?"touchstart":"mousedown",s.$9b,!0),s.afterHide&&s.afterHide())},dispose:function(){var x=this,Y=x.$12b,b=x._view;b&&(b.parentNode&&a(b.parentNode,b),x.disableGlobalKey(),Y&&(J?(_(Y,"touchstart",x.$6b,!0),_(Y,"touchmove",x.$7b),_(Y,"touchend",x.$8b)):_(Y,"contextmenu",x.$27b)),x._view=x._items=x.$21b=x.$19b=x.$12b=x.beforeShow=x.afterShow=x.afterHide=x.$9b=x.$3b=x.$6b=x.$7b=x.$8b=x.$27b=e)},$46b:function(J,U,n,s){var Y=c.initContext(J);c.translateAndScale(Y,0,0,1),Y.clearRect(0,0,n,s),t.drawStretchImage(Y,t.getImage(U),"fill",0,0,n,s),Y.restore()},$47b:function(){var f,q,Y,N=this,n=N._view;if(N.isShowing()){var r=H(n,".check-prefix");for(Y=0;Y<r.length;Y++){var w=r[Y];f=w.clientWidth,q=w.clientHeight,w.$48b=f,w.$49b=q,c.setCanvas(w,f,q)}var y=H(n,".radio-prefix");for(Y=0;Y<y.length;Y++){var O=y[Y];f=O.clientWidth,q=O.clientHeight,O.$48b=f,O.$49b=q,c.setCanvas(O,f,q)}var s=H(n,".contextmenu-item-icon");for(Y=0;Y<s.length;Y++){var m=s[Y];f=m.clientWidth,q=m.clientHeight,m.$48b=f,m.$49b=q,c.setCanvas(m,f,q)}}},validateImpl:function(){var L,b,A,o=this,r=o._view;if(o.isShowing()){var E=H(r,".check-prefix");for(A=0;A<E.length;A++){var u=E[A];L=u.$48b,b=u.$49b,L&&b&&o.$46b(u,t.contextMenuCheckIcon,L,b)}var x=H(r,".radio-prefix");for(A=0;A<x.length;A++){var G=x[A];L=G.$48b,b=G.$49b,L&&b&&o.$46b(G,t.contextMenuRadioIcon,L,b)}var N=H(r,".contextmenu-item-icon");for(A=0;A<N.length;A++){var R=N[A];L=R.$48b,b=R.$49b,L&&b&&o.$46b(R,t.getImage(R.$50b),L,b)}}}})}(this,Object);